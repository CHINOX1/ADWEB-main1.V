{% extends "central.html" %}

{% block title %}Detalles de la Empresa{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Encabezado de la empresa -->
    <div class="text-center bg-primary text-white p-4 rounded shadow">
        <h1 class="fw-bold">{{ empresa.nombre }}</h1>
    </div>

    <!-- Datos de la Empresa -->
    <div class="card shadow-lg mt-4">
        <div class="card-body">
            <h4 class="text-primary fw-bold">Datos de la Empresa</h4>
            <hr>
            <p><strong>📌 RUT:</strong> {{ empresa.rut }}</p>
            <p><strong>📍 Dirección:</strong> {{ empresa.direccion }}</p>
            <p><strong>📞 Teléfono:</strong> {{ empresa.telefono }}</p>
            <p><strong>📧 Email:</strong> {{ empresa.email }}</p>
            <p><strong>🌐 Sitio Web:</strong> <a href="{{ empresa.web }}" target="_blank">{{ empresa.web }}</a></p>
            <p><strong>📅 Fecha de Ingreso:</strong> {{ empresa.fecha_ingreso }}</p>
            <p><strong>📊 Plan Contratado:</strong> {{ empresa.plan_contratado.nombre }}</p>
            <p><strong>🔄 Estado:</strong> {{ empresa.estado }}</p>
            <p><strong>✅ Vigente:</strong> {{ empresa.vigente|yesno:"Sí,No" }}</p>
        </div>
    </div>

    <!-- Representante Legal -->
    <div class="card shadow-lg mt-4">
        <div class="card-body">
            <h4 class="text-primary fw-bold">Representante Legal</h4>
            <hr>
            <p><strong>📌 RUT:</strong> {{ empresa.rut_representante }}</p>
            <p><strong>👤 Nombre:</strong> {{ empresa.nombre_representante }}</p>
        </div>
    </div>

    <!-- Contacto -->
    <div class="card shadow-lg mt-4">
        <div class="card-body">
            <h4 class="text-primary fw-bold">Contacto</h4>
            <hr>
            <p><strong>👤 Nombre:</strong> {{ empresa.nombre_contacto }}</p>
            <p><strong>📞 Celular:</strong> {{ empresa.celular_contacto }}</p>
            <p><strong>📧 Email:</strong> {{ empresa.mail_contacto }}</p>
        </div>
    </div>

    <!-- Formulario de Búsqueda -->
    <div class="mt-4">
        <form method="get" action="{% url 'detalle_empresa' empresa.id %}" class="input-group shadow-sm">
            <input type="text" name="q" class="form-control" placeholder="Buscar por nombre de usuario" value="{{ query }}">
            <button class="btn btn-primary" type="submit"><i class="bi bi-search"></i> Buscar</button>
        </form>
    </div>

    <!-- Lista de Supervisores -->
    <div class="mt-5">
        <h3 class="text-primary fw-bold">Supervisores</h3>
        <ul class="list-group shadow-sm">
            {% for supervisor in supervisores %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span class="fw-bold">{{ supervisor.username }}</span>
                <span>{{ supervisor.email }}</span>
            </li>
            {% empty %}
            <li class="list-group-item text-center">No hay supervisores registrados.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Lista de Trabajadores -->
    <div class="mt-5">
        <h3 class="text-primary fw-bold">Trabajadores</h3>
        <ul class="list-group shadow-sm">
            {% for trabajador in trabajadores %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span class="fw-bold">{{ trabajador.username }}</span>
                <span>{{ trabajador.email }}</span>
            </li>
            {% empty %}
            <li class="list-group-item text-center">No hay trabajadores registrados.</li>
            {% endfor %}
        </ul>
       
    </div>
</div>
{% endblock %}